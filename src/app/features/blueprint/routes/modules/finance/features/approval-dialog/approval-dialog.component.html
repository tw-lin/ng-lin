
    <div class="approval-dialog">
      <!-- 單據資訊 -->
      <nz-card nzSize="small" nzTitle="單據資訊" style="margin-bottom: 16px;">
        <div nz-row [nzGutter]="16">
          <div nz-col [nzSpan]="12">
            <div style="margin-bottom: 8px;">
              <span style="color: #666;">單據編號：</span>
              <strong>{{ data.invoice.invoiceNumber }}</strong>
            </div>
          </div>
          <div nz-col [nzSpan]="12">
            <div style="margin-bottom: 8px;">
              <span style="color: #666;">單據類型：</span>
              <nz-tag [nzColor]="data.invoice.invoiceType === 'receivable' ? 'blue' : 'orange'">
                {{ data.invoice.invoiceType === 'receivable' ? '請款單' : '付款單' }}
              </nz-tag>
            </div>
          </div>
          <div nz-col [nzSpan]="12">
            <div style="margin-bottom: 8px;">
              <span style="color: #666;">金額：</span>
              <span style="color: #1890ff; font-weight: bold; font-size: 16px;">
                ${{ data.invoice.total | number }}
              </span>
            </div>
          </div>
          <div nz-col [nzSpan]="12">
            <div style="margin-bottom: 8px;">
              <span style="color: #666;">當前狀態：</span>
              <nz-tag [nzColor]="getStatusColor(data.invoice.status)">
                {{ getStatusLabel(data.invoice.status) }}
              </nz-tag>
            </div>
          </div>
          <div nz-col [nzSpan]="12">
            <div style="margin-bottom: 8px;">
              <span style="color: #666;">{{ data.invoice.invoiceType === 'receivable' ? '請款方' : '付款方' }}：</span>
              {{ data.invoice.billingParty.name }}
            </div>
          </div>
          <div nz-col [nzSpan]="12">
            <div style="margin-bottom: 8px;">
              <span style="color: #666;">{{ data.invoice.invoiceType === 'receivable' ? '付款方' : '收款方' }}：</span>
              {{ data.invoice.payingParty.name }}
            </div>
          </div>
        </div>
      </nz-card>

      <nz-divider nzText="審核意見"></nz-divider>

      <!-- 審核結果選擇 -->
      <nz-form-item>
        <nz-form-label [nzSpan]="4">審核結果</nz-form-label>
        <nz-form-control [nzSpan]="20">
          <nz-radio-group [(ngModel)]="approvalResult">
            <label nz-radio nzValue="approve">
              <span nz-icon nzType="check-circle" style="color: #52c41a;"></span>
              核准
            </label>
            <label nz-radio nzValue="reject">
              <span nz-icon nzType="close-circle" style="color: #ff4d4f;"></span>
              退回
            </label>
          </nz-radio-group>
        </nz-form-control>
      </nz-form-item>

      <!-- 審核意見 -->
      <nz-form-item>
        <nz-form-label [nzSpan]="4" [nzRequired]="approvalResult === 'reject'">
          備註
        </nz-form-label>
        <nz-form-control [nzSpan]="20">
          <textarea
            nz-input
            [(ngModel)]="comments"
            [rows]="4"
            [placeholder]="approvalResult === 'reject' ? '請填寫退回原因（必填）' : '選填審核意見'">
          </textarea>
          @if (approvalResult === 'reject' && !comments) {
            <div style="color: #ff4d4f; margin-top: 4px;">
              退回時必須填寫原因
            </div>
          }
        </nz-form-control>
      </nz-form-item>

      <!-- 操作按鈕 -->
      <div style="text-align: right; margin-top: 16px;">
        <button nz-button nzType="default" (click)="cancel()">取消</button>
        <button
          nz-button
          [nzType]="approvalResult === 'approve' ? 'primary' : 'default'"
          [nzDanger]="approvalResult === 'reject'"
          [nzLoading]="submitting()"
          [disabled]="!canSubmit()"
          (click)="confirm()"
          style="margin-left: 8px;">
          {{ approvalResult === 'approve' ? '確認核准' : '確認退回' }}
        </button>
      </div>
    </div>
  